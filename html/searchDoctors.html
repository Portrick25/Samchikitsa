<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet">
    
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <link rel="icon" href="../images/logo.png">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/search.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samchikitsa</title>
</head>
<body>
    <div class="header">
        <div class="brand"><img class="brand-img" src="../images/logo.png" alt="logo"></div>
        <div class="sam-title">
            <h3> SAMCHIKITSA </h3>
            <div class="quote-bg"><b id="btext"></b></div>
        </div>
        <div class="account">
            <img class="avatar" src="../images/avatar.png" alt="" srcset="">  
            <div class="account-detail">
                <div class="account-detail-content"><a id="myprofile" onclick="ifuser()">My Profile</a></div>
                <div class="account-detail-content"><a onclick="ifuser()">Edit User</a></div>
                <div class="account-detail-content"><a onclick="ifuser()" onclick = signOut()>Logout</a></div>

            </div> 
        </div>
    </div>
    <nav>
        <a class="nav-link active" href="../index.html">Home</a>
        <a class="nav-link" href="about.html" >About Us</a>
        <a class="nav-link" href="testimonial.html">Testimonials</a>
        <a class="nav-link" href="us.html">Upcoming Services</a>
        <a class="nav-link" id="mdh" href="#">SignUp</a>
        
    <div class="signupContainer">
        <a href="signup.html"> Signup As user </a><br><hr>
        <a href="doctSignup.html"> Signup As doctor </a> <br><hr>
        <a href="doctPsycho.html"> Signup As psychiatrist </a>
    </div>
        <a class="nav-link" id="mdh2" href="#">Login</a>
        <div class="signupContainer2">
            <a href="login.html"> login As user </a><br><hr>
            <a href="doctSignup.html"> login As doctor </a> <br><hr>
            <a href="doctPsycho.html"> login As psychiatrist </a>
        </div>
        
    </nav>
    <div id="doctors">
        <h1>Doctor Of Your Choice</h1>
        <div id="doct-list"></div>
    </div>

    <div id="consult-pref" style="display: none;">
        <div id="formcontainer-signup">
            <button id="cancel" onclick="cancel()">x</button>
            <h1 style="text-align: center;">Doctor Of Your Choice</h1>
                <label for="name">Doctor: </label><br>
                <input type="text" id="Dname" name = "Dname" required><br>
                <label for="name">Name: </label><br>
                <input type="text" placeholder="Enter Your Name" id="Pname" name = "name" required><br>
                <label for="mobileno">Phone: </label><br>
                <input type="number" name="mobileno" id="mobileno" placeholder="+91 "><br>
                <label for="Mode">Mode Of communication: </label><br>
                <select name="Mode1" id="Mode1" >
                    <option value="select"> Select</option>
                    <option value="chat">Chat</option>
                    <option value="call">Call</option>
                    <option value="video">Video</option>
                </select><br>
                <div id="htc-chat1" style="display: none;">
                    <label for="method">
                        Select Chatting Platform
                    </label><br>
                    <select name="method" id="method-chat">
                        <option value="message">Message</option>
                        <option value="whatsapp">Whatsapp</option>
                    </select>
                </div>
                <div id="htc-call1" style="display: none;">
                    <label for="method">
                        Select Calling Platform
                    </label><br>
                    <select name="method" id="method-call">
                        <option value="phone-call">Phone Call</option>
                        <option value="whatsapp-call">Whatsapp Call</option>
                    </select>
                </div>
                <div id="htc-video1" style="display: none;">
                    <label for="method">
                        Select Video Platform
                    </label><br>
                    <select name="method" id="method-video">
                        <option value="meet-video">Google Meet</option>
                        <option value="whatsapp-video">Whatsapp Video</option>
                        <option value="Zoom-video">Zoom Video</option>
                    </select>
                </div>
                
                <label for="date">Pick date</label><br>
                <input type="date" name="date" id="txtDate1" placeholder="pick a suitable date"><br>
                <label for="time">Pick Time</label><br>
                <select name="time" id="time1" required>
                    <option value="#">Select</option>

                    <option value="09:00 AM" >09:00 AM - 09:15 AM</option>
                    <option value="09:15 AM" >09:15 AM - 09:30 AM</option>
                    <option value="09:30 AM" >09:30 AM - 09:45 AM</option>
                    <option value="09:45 AM" >09:45 AM - 10:00 AM</option>

                    <option value="10:00 AM" >10:00 AM - 10:15 AM</option>
                    <option value="10:15 AM" >10:15 AM - 10:30 AM</option>
                    <option value="10:30 AM" >10:30 AM - 10:45 AM</option>
                    <option value="10:45 AM" >10:45 AM - 11:00 AM</option>
                    
                    <option value="11:00 AM" >11:00 AM - 11:15 AM</option>
                    <option value="11:15 AM" >11:15 AM - 11:30 AM</option>
                    <option value="11:30 AM" >11:30 AM - 11:45 AM</option>
                    <option value="11:45 AM" >11:45 AM - 12:00 PM</option>

                    <option value="12:00 PM" >12:00 PM - 12:15 PM</option>
                    <option value="12:15 PM" >12:15 PM - 12:30 PM</option>
                    <option value="12:30 PM" >12:30 PM - 12:45 PM</option>
                    <option value="12:45 PM" >12:45 PM - 01:00 PM</option>
                    
                    <option value="01:00 PM" >01:00 PM - 01:15 PM</option>
                    <option value="01:15 PM" >01:15 PM - 01:30 PM</option>
                    <option value="01:30 PM" >01:30 PM - 01:45 PM</option>
                    <option value="01:45 PM" >01:45 PM - 02:00 PM</option>
                    
                    <option value="02:00 PM" >02:00 PM - 02:15 PM</option>
                    <option value="02:15 PM" >02:15 PM - 02:30 PM</option>
                    <option value="02:30 PM" >02:30 PM - 02:45 PM</option>
                    <option value="02:45 PM" >02:45 PM - 03:00 PM</option>
                    
                    <option value="03:00 PM" >03:00 PM - 03:15 PM</option>
                    <option value="03:15 PM" >03:15 PM - 03:30 PM</option>
                    <option value="03:30 PM" >03:30 PM - 03:45 PM</option>
                    <option value="03:45 PM" >03:45 PM - 03:00 PM</option>
                    
                    <option value="04:00 PM" >04:00 PM - 04:15 PM</option>
                    <option value="04:15 PM" >04:15 PM - 04:30 PM</option>
                    <option value="04:30 PM" >04:30 PM - 04:45 PM</option>
                    <option value="04:45 PM" >04:45 PM - 05:00 PM</option>
                    
                    <option value="05:00 PM" >05:00 PM - 05:15 PM</option>
                    <option value="05:15 PM" >05:15 PM - 05:30 PM</option>
                    <option value="05:30 PM" >05:30 PM - 05:45 PM</option>
                    <option value="05:45 PM" >05:45 PM - 06:00 PM</option>
                </select><br>
                <div >Amount : <span id="fees"></span> </div><br>
                <button id="rzp-button2" >Consult Now</button><br>
        </div>
    </div>
</div>
        <footer class="footer-main">
            <div class="footer">
                <div class="footer-content">
                    <strong>Samchikitsa</strong><br>
                    <a id="footer-link" href="../html/about.html">about</a><br>
                    <a id="footer-link" href="../html/aboutH.html">about homeopathy</a><br>
                    <a id="footer-link" href="../html/news.html">blog</a><br>
                    <a id="footer-link" href="career.html"> career</a><br>
                    <a id="footer-link" href="mailto: info@samchikitsa.com">support 24X7</a><br>
                </div>
                <div class="footer-content">
                    <strong>for patients</strong><br>
                    <a id="footer-link" href="searchDoctors.html">search for doctors</a><br>
                    <a id="footer-link" href="articles.html">health articles</a><br>
                    <a id="footer-link" href="HTC.html">consult a doctor</a><br>
                    <a id="footer-link" href="lab.html">book a lab test</a><br>
                    <a id="footer-link" href="BOA.html">offline appointments</a><br>
                    <a id="footer-link" href="subscription.html">subscriptions</a><br>
                </div>
                <div class="footer-content">
                    <strong>for homeopathic doctors</strong><br>
                    <a id="footer-link" href="doctSignup.html">join samchikitsa</a><br>
                    <a id="footer-link" href="sharecase.html">share your cases</a><br>
                </div>
                <div class="footer-content">
                    <strong>for psychologists</strong><br>
                    <a id="footer-link" href="doctpsycho.html">join samchikitsa</a><br>
                    <a id="footer-link" href="sharecase.html">share your cases</a><br>
                </div>
                <div class="footer-content">
                    <strong>social</strong><br>
                    <a id="footer-link" href="https://www.facebook.com/Samchikitsa/">Facebook</a><br>
                    <a id="footer-link" href="https://instagram.com/samchikitsa?igshid=8qu71uomafai">Instagram</a><br>
                    <a id="footer-link" href="#">Twitter</a><br>
                    <a id="footer-link" href="#">Linkedin</a><br>
                </div>
                <div class="footer-content">
                    <strong>more</strong><br>
                    <a id="footer-link" href="../html/pp.html">privacy policies</a><br>
                    <a id="footer-link" href="../html/tnc.html">terms & conditions</a><br>
                    <a id="footer-link" href="../html/disclaimer.html">disclaimer</a><br>
                </div>
            </div>
            <div class="footer-img">
                <h1>samchikitsa</h1>
                <p>Copyright &copy; 2020. All rights reserved</p>
    
            </div>
        </footer>
</div>
   <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-analytics.js"></script>

    <script>

        var i = 0;
        var txt = 'Serving Complete Health & Well Being';
        var speed = 30;

        function typeWriter() {
            if (i < txt.length) {
                document.getElementById("btext").innerHTML += txt.charAt(i);
                i++;
                setTimeout(typeWriter, speed);
            }
        }
        typeWriter();
    </script>
        <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase.js"></script>
    <script>

 // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyDE9G1FeHjwTFzVpHx2nUE_ROpwyM7ipZw",
    authDomain: "samchikitsa-96a4d.firebaseapp.com",
    projectId: "samchikitsa-96a4d",
    storageBucket: "samchikitsa-96a4d.appspot.com",
    messagingSenderId: "901173838593",
    appId: "1:901173838593:web:2f30c443538c413e69d100",
    measurementId: "G-6TE1JXH2DZ"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();


const auth = firebase.auth();
const db = firebase.firestore();

auth.onAuthStateChanged(function(user){
    if(user){ 
        if(user.email){
            document.getElementById("myprofile").innerHTML = user.email;
        }
        if(user.phone){
            document.getElementById("myprofile").innerHTML = user.phone;
        }
    }
    })

function ifuser(){
    
    auth.onAuthStateChanged(function(user){
    if(user){ 
        window.location.replace("profile.html")
    }else{
        window.location.replace("login.html")
    }
}) 

}

function cancel(){
    document.getElementById("consult-pref").style.display = "none";
    document.getElementById("doctors").style.display = "block";
}
function bookDoctor(uniqueKey){
    db.collection('doctors_additional_info').where('regd_no', '==', uniqueKey).get().then(snapshot =>{
        snapshot.docs.forEach(doc =>{
            document.getElementById('Dname').value = doc.data().name;
            document.getElementById('fees').innerHTML = doc.data().charges;
        })
        
    })
    document.getElementById("consult-pref").style.display = "block";
    document.getElementById("doctors").style.display = "none";
}




function DoctByChoice(){

auth.onAuthStateChanged(function(user){
    if(user){
        if(document.getElementById("Mode").value == "chat"){
            var method = document.getElementById("method-chat").value;
        }
        else if(document.getElementById("Mode").value == "call"){
            var method = document.getElementById("method-call").value;
        }
        else if(document.getElementById("Mode").value == "video"){
            var method = document.getElementById("method-video").value;
        }
        db.collection('users').doc(user.uid).collection('DoctChoice').add({
            Doctor : document.getElementById("Dname").value,
            PatientName : document.getElementById("Pname1").value,
            Mobile : document.getElementById("mobileno1").value,
            Mode : document.getElementById("Mode1").value,
            date : document.getElementById("txtDate1").value, 
            time : document.getElementById("time1").value,
            fees : document.getElementById("fees").innerHTML,
            payment: "done"

        }).then(function(){
            
        db.collection('teleConsultToDoctor').add({
            Doctor : document.getElementById("Dname").value,
            PatientName : document.getElementById("Pname1").value,
            Mobile : document.getElementById("mobileno1").value,
            Mode : document.getElementById("Mode1").value,
            date : document.getElementById("txtDate1").value, 
            time : document.getElementById("time1").value,
            fees : document.getElementById("fees").innerHTML,
            payment: "done"

        })
            alert("data uploaded Successfully.");
            window.location.reload();
        })
    }else{
        alert("no active user");
    }
})

    
}



// payment for doctor by your choice





document.getElementById('rzp-button2').onclick = function(e){
 
var num = (document.getElementById("fees").innerHTML)*100;
var options2 = {

"key":"rzp_live_DGjNWgb5gzMcg4", // Enter the Key ID generated from the Dashboard
"amount":num, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
"currency": "INR",
"name": "Samchikitsa",
"description": "Pay To Complete Your Appointmnet",
"image": "../images/logo.png",
"handler": function (response){
    DoctByChoice();
},

"prefill": {
    "name": document.getElementById("Pname").value,
    "email": "xyz@example.com",
    "contact":  document.getElementById("mobileno").value,
},
"notes": {
    "address": "Moradabad"
},
"theme": {
    "color": "#F37254"
}
};
var rzp2 = new Razorpay(options2);

auth.onAuthStateChanged(function(user){
    if(user){
        
        if(document.getElementById("Pname").value == ""){
            alert("patient name required")
        }else if(document.getElementById("mobileno").value == ""){
            alert("Mobile number Required")
        }else if(document.getElementById("Mode1").value == ""){
            alert("Please Select a Mode")
        }else if(document.getElementById("txtDate1").value == ""){
            alert("Please Select a Date")
        }else{
            rzp2.open();
            e.preventDefault();
        }

    }else{
        alert("no active user.")
        window.location.replace("login.html")
    }
    
})
}


function signOut(){
     auth.signOut();
     window.location.replace("login.html")
     alert('signed Out')
 }




var dbRef = firebase.firestore();
            dbRef.collection('doctors_additional_info').get().then((snapshot) =>{
                snapshot.docs.forEach(doc => {
                    var fees = doc.data().charges;
                    const name = doc.data().name;
                    const regd_no = doc.data().regd_no;
                    const exp = doc.data().exp;
                    const qualification = doc.data().qualification;
                    const profilePhoto = doc.data().profilePhoto;
                    document.getElementById("doct-list").innerHTML += '<div class = "doct-list-content"><img src="'+profilePhoto+'" alt=" Doctors photo"><br><b> Doctor: '+name+'</b><br><b>Qual: '+qualification+' </b><br><b> exp : '+exp+' years</b><br><b> Fees :₹ '+fees+'</b><br><button id="book-doctor" onclick = "bookDoctor(\'' + regd_no + '\')">Book Now</button><br></p></div>'
                })
            })







    
</script>
</body>
</html>


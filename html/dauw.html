<!DOCTYPE html>
<html lang="en">
<head>
        
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-analytics.js"></script>
    <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase.js"></script>
    <script src="app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@600&display=swap" rel="stylesheet">
    <link rel="icon" href="../images/logo.png">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/htc.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samchikitsa Signup</title>
</head>
<body>

<div class="PC">  
    <div class="header">
        <div class="brand"><img class="brand-img" src="../images/logo.png" alt="logo"></div>
        <div class="sam-title">
            <h3> SAMCHIKITSA </h3>
            
            <div class="quote-bg"><b id="btext"></b></div>
        </div>
    
        <div class="account">
            <img class="avatar" src="../images/avatar.png" alt="" srcset="">  
            <div class="account-detail">
                <div class="account-detail-content"><a id="myprofile" onclick="ifuser()">My Profile</a></div>
                <div class="account-detail-content"><a onclick="ifuser()">Edit User</a></div>
                <div class="account-detail-content"><a onclick="ifuser()" onclick = signOut()>Logout</a></div>

            </div> 
        </div>
    </div>

    <nav>
        <a class="nav-link active" href="../index.html">Home</a>
        <a class="nav-link" href="about.html" >About Us</a>
        <a class="nav-link" href="testimonial.html">Testimonials</a>
        <a class="nav-link" href="us.html">Upcoming Services</a>
        <a class="nav-link" id="mdh" href="#">SignUp</a>
        
    <div class="signupContainer">
        <a href="signup.html"> Signup As user </a><br><hr>
        <a href="doctSignup.html"> Signup As doctor </a> <br><hr>
        <a href="doctPsycho.html"> Signup As psychiatrist </a>
    </div>
        <a class="nav-link" id="mdh2" href="#">Login</a>
        <div class="signupContainer2">
            <a href="login.html"> login As user </a><br><hr>
            <a href="doctSignup.html"> login As doctor </a> <br><hr>
            <a href="doctPsycho.html"> login As psychiatrist </a>
        </div>
        
    </nav>
<!--BLOCK CONTENT-->
<div id="consult" style="margin-top: 2em;">
        <h1 style="text-align: center;">Your Personalised Diet Plans</h1>
        <div class="dauw-form">
                <label for="name">Name: </label><br>
                <input type="text" name="name" id="name" required><br>
                <label for="gender">Gender</label><br>
                <select name="gender" id="gender" required>
                    <option value="#">select</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">other</option>
                </select><br>
                <label for="weight">Weight</label><br>
                <input type="number" name="weight" id="weight" placeholder="in kgs" required><br>
                <label for="Height">Height</label><br>
                <input type="number" name="heightcm" id="heightcm" placeholder="in cms" required><br>
                <label for="bmi">BMI</label><br>
                <input type="text" name="bmi" id="bmi" value="" required><br>
                <label for="bfl">Body Fat Level</label><br>
                <select name="bfl" id="bfl" required>
                    <option value="#">select</option>
                    <option value="low">1% - 16% (LOW)</option>
                    <option value="moderate">16% - 25% (MODERATE)</option>
                    <option value="high">25% - 50% (HIGH)</option>
                </select><br>
                <label for="wants">I Want To</label><br>
                <select name="wants" id="wants" required>
                    <option value="#">select</option>
                    <option value="lower">loose weight</option>
                    <option value="maintain">maintain Weight</option>
                    <option value="gain">Gain Weight</option>
                </select><br>
                <label for="level">Exercise Level</label><br>
                <select name="level" id="level" required>
                    <option value="#">select</option>
                    <option value="no">very little</option>
                    <option value="light">1-3 times/week</option>
                    <option value="moderate">3-5 times/week</option>
                    <option value="heavy">6-7 days/week</option>
                </select><br>
                <label for="allergy">Please Mention if you are allergic to any food</label><br>
                <input type="text" name="alergy" id="alergy" required><br>
                <label>Please mention if you have any of the following disease</label><br>
                <input type="checkbox" name="Diabetes" id="Diabetes">
                <label for="Diabetes">DIABETES</label><br>
                <input type="checkbox" name="uricAcid"  id="uricAcid">
                <label for="uricAcid">INCREASED URIC ACID</label><br>
                <input type="checkbox" name="spine" id="spine">
                <label for="spine">SPINE DISEASE</label><br>
                <input type="checkbox" name="hyperthyroidism"  id="hyperthyroidism">
                <label for="hyperthyroidism">HYPERTHYROIDISM</label><br>
                <input type="checkbox" name="hypothyroidism" id="hypothyroidism">
                <label for="hypothyroidism">HYPOTHYROIDISM</label><br>
                <input type="checkbox" name="cholestrol" id="cholestrol">
                <label for="cholestro">HIGH CHOLESTROL</label><br>
                
                <label for="">  How many meals and snacks you take in a day?</label><br>
                <label for="meals">Meals: </label><br>
                <select name="meals" id="meals" required>
                    <option value="#">select</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select><br>
                <label for="snacks">Snacks: </label><br>
                <select name="snacks" id="snacks" required>
                    <option value="#"> select</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select><br>
                <label for="Diet">Diet Preferences</label><br>
                <select name="diet" id="diet" required>
                    <option value="#">select</option>
                    <option value="vegeterian">Vegetarian</option>
                    <option value="non-vegetarian">Non Vegetarian</option>
                </select><br>
                <button type="submit" onclick="save()"> submit</button>

        </div>
    </div>

    <footer class="footer-main">
        <div class="footer">
            <div class="footer-content">
                <strong>Samchikitsa</strong><br>
                <a id="footer-link" href="../html/about.html">about</a><br>
                <a id="footer-link" href="../html/aboutH.html">about homeopathy</a><br>
                <a id="footer-link" href="../html/news.html">blog</a><br>
                <a id="footer-link" href="career.html"> career</a><br>
                <a id="footer-link" href="mailto: info@samchikitsa.com">support 24X7</a><br>
            </div>
            <div class="footer-content">
                <strong>for patients</strong><br>
                <a id="footer-link" href="searchDoctors.html">search for doctors</a><br>
                <a id="footer-link" href="articles.html">health articles</a><br>
                <a id="footer-link" href="HTC.html">consult a doctor</a><br>
                <a id="footer-link" href="lab.html">book a lab test</a><br>
                <a id="footer-link" href="BOA.html">offline appointments</a><br>
                <a id="footer-link" href="subscription.html">subscriptions</a><br>
            </div>
            <div class="footer-content">
                <strong>for homeopathic doctors</strong><br>
                <a id="footer-link" href="doctSignup.html">join samchikitsa</a><br>
                <a id="footer-link" href="sharecase.html">share your cases</a><br>
            </div>
            <div class="footer-content">
                <strong>for psychologists</strong><br>
                <a id="footer-link" href="doctpsycho.html">join samchikitsa</a><br>
                <a id="footer-link" href="sharecase.html">share your cases</a><br>
            </div>
            <div class="footer-content">
                <strong>social</strong><br>
                <a id="footer-link" href="https://www.facebook.com/Samchikitsa/">Facebook</a><br>
                <a id="footer-link" href="https://instagram.com/samchikitsa?igshid=8qu71uomafai">Instagram</a><br>
                <a id="footer-link" href="#">Twitter</a><br>
                <a id="footer-link" href="#">Linkedin</a><br>
            </div>
            <div class="footer-content">
                <strong>more</strong><br>
                <a id="footer-link" href="../html/pp.html">privacy policies</a><br>
                <a id="footer-link" href="../html/tnc.html">terms & conditions</a><br>
                <a id="footer-link" href="../html/disclaimer.html">disclaimer</a><br>
            </div>
        </div>
        <div class="footer-img">
            <h1>samchikitsa</h1>
            <p>Copyright &copy; 2020. All rights reserved</p>

        </div>
    </footer>
    <!--BLOCK CONTENT END-->
</div>
<script>
        var i = 0;
        var txt = 'Serving Complete Health & Well Being';
        var speed = 30;

        function typeWriter() {
            if (i < txt.length) {
                document.getElementById("btext").innerHTML += txt.charAt(i);
                i++;
                setTimeout(typeWriter, speed);
            }
        }
        typeWriter();

        
        
        var fileButton = document.getElementById("weight");
        fileButton.addEventListener('change', function(e){
            var weight = document.getElementById("weight").value;
            var height = document.getElementById("heightcm").value;
            var heightsq = ((height/100) * (height/100));
            var bmi = weight/heightsq;
            document.getElementById("bmi").value = bmi.toFixed(2);
        })
        var fileButton2 = document.getElementById("heightcm");
        fileButton2.addEventListener('change', function(e){
            var weight = document.getElementById("weight").value;
            var height = document.getElementById("heightcm").value;
            var heightsq = ((height/100) * (height/100));
            var bmi = weight/heightsq;
            document.getElementById("bmi").value = bmi.toFixed(2);
        })
        

    
</script>
<script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyB2MAuoYNwlnfE7D3DUFF0ksTq52inDdmY",
      authDomain: "samchikitsa-8ae9a.firebaseapp.com",
      databaseURL: "https://samchikitsa-8ae9a.firebaseio.com",
      projectId: "samchikitsa-8ae9a",
      storageBucket: "samchikitsa-8ae9a.appspot.com",
      messagingSenderId: "151461880341",
      appId: "1:151461880341:web:3a6fbdaa6d75229d9ee41c",
      measurementId: "G-XGTMGR77Z4"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
  
    const auth = firebase.auth();
    const db = firebase.firestore();


    auth.onAuthStateChanged(function(user){
    if(user){ 
        if(user.email){
            document.getElementById("myprofile").innerHTML = user.email;
        }
        if(user.phone){
            document.getElementById("myprofile").innerHTML = user.phone;
        }
    }
    })


    function ifuser(){
    
    auth.onAuthStateChanged(function(user){
    if(user){ 
        db.collection("doctors").doc(user.uid).get().then(doc =>{
            docEmail = doc.data().email;
            if(user.email == docEmail){
                window.location.replace("doct-dashboard.html")  
            }else{
                    alert("no active doctor. Please login")
                }

        })
        db.collection("users").doc(user.uid).get().then(doc =>{
                Email = doc.data().email;
                if(user.email == Email){
                window.location.replace("profile.html")  
                }else{
                    alert("no active user. Please login")
                }
            })
    }
}) 

}

function signOut(){
     auth.signOut();
     window.location.replace("login.html")
     alert('signed Out')
 }



    function save(){
            
            auth.onAuthStateChanged(function(user){

                if(user){
                    db.collection('users').doc(user.uid).collection('dietPlans').add({
                        email: user.email,
                        Name : document.getElementById("name").value,
                        Gender : document.getElementById("gender").value,
                        BMI : document.getElementById("bmi").value,
                        BodyFatLevel : document.getElementById("bfl").value,
                        UserWishTo : document.getElementById("wants").value,
                        ExerciseLevel : document.getElementById("level").value,
                        Allergy : document.getElementById("alergy").value,
                        Disease : document.getElementById("Diabetes").value +document.getElementById("cholestrol").value +document.getElementById("hyperthyroidism").value +document.getElementById("hypothyroidism").value +document.getElementById("spine").value +document.getElementById("uricAcid").value, 
                        mealsPerDay : document.getElementById("meals").value,
                        snacksPerDay : document.getElementById("snacks").value,
                        dietPreference : document.getElementById("diet").value, 

                    }).then(function(){
                        alert("data uploaded Successfully. ");
                        window.location.reload();
                    })
                }else{
                    alert("no active user");
                    window.location.replace("login.html")
                }
            })
        }
       
       


</script>
</body>
</html>

